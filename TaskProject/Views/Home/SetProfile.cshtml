@using TaskProject
@model ViewSetProfileModel

@section Css{
    <style>
        .steps-form-3 {
            width: 2px;
            height: 470px;
            position: relative;
        }

            .steps-form-3 .steps-row-3 {
                display: -webkit-box;
                display: -webkit-flex;
                display: -ms-flexbox;
                display: flex;
                -webkit-box-align: center;
                -webkit-align-items: center;
                -ms-flex-align: center;
                align-items: center;
                -webkit-box-orient: vertical;
                -webkit-box-direction: normal;
                -webkit-flex-direction: column;
                -ms-flex-direction: column;
                flex-direction: column;
            }

                .steps-form-3 .steps-row-3:before {
                    top: 14px;
                    bottom: 0;
                    position: absolute;
                    content: "";
                    width: 2px;
                    height: 100%;
                    background-color: #7283a7;
                }

                .steps-form-3 .steps-row-3 .steps-step-3 {
                    height: 150px;
                    display: -webkit-box;
                    display: -webkit-flex;
                    display: -ms-flexbox;
                    display: flex;
                    text-align: center;
                    position: relative;
                }

                    .steps-form-3 .steps-row-3 .steps-step-3.no-height {
                        height: 50px;
                    }

                    .steps-form-3 .steps-row-3 .steps-step-3 p {
                        margin-top: 0.5rem;
                    }

                    .steps-form-3 .steps-row-3 .steps-step-3 button[disabled] {
                        opacity: 1 !important;
                        filter: alpha(opacity=100) !important;
                    }

                    .steps-form-3 .steps-row-3 .steps-step-3 .btn-circle-3 {
                        width: 60px;
                        height: 60px;
                        border: 2px solid #59698D;
                        background-color: white !important;
                        color: #59698D !important;
                        border-radius: 50%;
                        padding: 18px 18px 15px 15px;
                        margin-top: -22px;
                    }

                        .steps-form-3 .steps-row-3 .steps-step-3 .btn-circle-3:hover {
                            border: 2px solid #4285F4;
                            color: #4285F4 !important;
                            background-color: white !important;
                        }

                        .steps-form-3 .steps-row-3 .steps-step-3 .btn-circle-3 .fa {
                            font-size: 1.7rem;
                        }
    </style>
}

<!-- Grid row -->
<div class="row pt-5 d-flex justify-content-center">

    <!-- Grid column -->
    <div class="col-md-2 pl-5 pl-md-0 pb-5">

        <!-- Stepper -->
        <div class="steps-form-3">
            <div class="steps-row-3 setup-panel-3 d-flex justify-content-between">
                <div class="steps-step-3">
                    <a href="#step-5" type="button" class="btn btn-info btn-circle-3 waves-effect ml-0" data-toggle="tooltip" data-placement="top" title="О себе"><i class="fa fa-user" aria-hidden="true"></i></a>
                </div>
                <div class="steps-step-3">
                    <a href="#step-6" type="button" class="btn btn-pink btn-circle-3 waves-effect p-3" data-toggle="tooltip" data-placement="top" title="Физические характеристики"><i class="fa fa-heart-o" aria-hidden="true"></i></a>
                </div>
                <div class="steps-step-3">
                    <a href="#step-7" type="button" class="btn btn-pink btn-circle-3 waves-effect" data-toggle="tooltip" data-placement="top" title="Мировозрение"><i class="fa fa-comment-o" aria-hidden="true"></i></a>
                </div>
                <div class="steps-step-3 no-height">
                    <a href="#step-8" type="button" class="btn btn-pink btn-circle-3 waves-effect p-3" data-toggle="tooltip" data-placement="top" title="Финиш"><i class="fa fa-check" aria-hidden="true"></i></a>
                </div>
            </div>
        </div>

    </div>
    <!-- Grid column -->
    <!-- Grid column -->
    <div class="col-md-7">

        <form role="form" action="SetProfile" method="post">
            @Html.AntiForgeryToken()
            <!-- First Step -->
            <div class="row setup-content-3" id="step-5">
                <div class="col-md-12">
                    <h3 class="font-weight-bold pl-0 my-4"><strong>Добавьте информацию о себе</strong></h3>
                    <div class="form-group md-form">
                        <label for="NickName" data-error="wrong" data-success="right">Никнейм</label>
                        <input id="NickName" name="NickName" type="text" required="required" class="form-control validate">
                    </div>
                    <div class="form-group md-form">
                        <label for="Sex" data-error="wrong" data-success="right">Пол</label>
                        @Html.DropDownListFor(m => m.Sex, Model.SexSelect, new { @class = "form-control" })
                    </div>
                    <div class="form-group md-form mt-3">
                        <label for="DateBirth" data-error="wrong" data-success="right">Дата рождения</label>
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <span class="input-group-text"><i class="fa fa-calendar"></i></span>
                            </div>
                            <input id="DateBirth" name="DateBirth" type="date" required min="1930-01-01" max="@DateTime.Now.ToString("yyyy-MM-dd")" class="form-control validate">
                        </div>
                    </div>
                    <button class="btn btn-mdb-color btn-rounded nextBtn-3 float-right" type="button">Дальше</button>
                </div>
            </div>


            <!-- Second Step -->
            <div class="row setup-content-3" id="step-6">
                <div class="col-md-12">
                    <h3 class="font-weight-bold pl-0 my-4"><strong>Ваши физические данные</strong></h3>
                    <div class="form-group md-form">
                        <label for="Growth" data-error="wrong" data-success="right">Ваш рост</label>
                        <input id="Growth" name="Growth" type="text" required="required" class="form-control validate">
                    </div>
                    <div class="form-group md-form mt-3">
                        <label for="Weight" data-error="wrong" data-success="right">Ваш вес</label>
                        <input id="Weight" name="Weight" type="text" required="required" class="form-control validate">
                    </div>
                    <button class="btn btn-mdb-color btn-rounded prevBtn-3 float-left" type="button">Назад</button>
                    <button class="btn btn-mdb-color btn-rounded nextBtn-3 float-right" type="button">Дальше</button>
                </div>
            </div>


            <!-- Third Step -->
            <div class="row setup-content-3" id="step-7">
                <div class="col-md-12">
                    <h3 class="font-weight-bold pl-0 my-4"><strong>Ваше мировозрение</strong></h3>
                    <div class="row">
                        @foreach (Aligment aligment in Model.AligmentSelect)
                        {
                            <div class="col-4 mb-3">
                                <label><input type="radio" id="AligmentId" required data_descr="@aligment.Description" name="AligmentId" value="@aligment.AligmentId" />@aligment.Name</label>
                            </div>

                        }
                    </div>
                    <div class="col-12">
                        <span class="aligment_description"></span>
                    </div>
                    <button class="btn btn-mdb-color btn-rounded prevBtn-3 float-left" type="button">Назад</button>
                    <button class="btn btn-mdb-color btn-rounded nextBtn-3 float-right" type="button">Дальше</button>
                </div>
            </div>


            <!-- Fourth Step -->
            <div class="row setup-content-3" id="step-8">
                <div class="col-md-12">
                    <h3 class="font-weight-bold pl-0 my-4"><strong>Конец</strong></h3>
                    <h2 class="text-center my-4">
                        Сбор данных окончен. Нажмите принять для сохранения
                        своих данных.
                    </h2>
                    <button class="btn btn-mdb-color btn-rounded prevBtn-3 float-left" type="button">Назад</button>
                    <button class="btn btn-success btn-rounded float-right" type="submit">Принять</button>
                </div>
            </div>
        </form>

    </div>
    <!-- Grid column -->

</div>
<!-- Grid row -->
<!-- jQuery -->

<script src="~/plugins/jquery/jquery.min.js"></script>

<!-- Bootstrap 4 -->
<script src="~/plugins/bootstrap/js/bootstrap.bundle.min.js"></script>

<!-- InputMask-->
<script src="~/plugins/input-mask/jquery.inputmask.js"></script>
<script src="~/plugins/input-mask/jquery.inputmask.date.extensions.js"></script>
<script src="~/plugins/input-mask/jquery.inputmask.numeric.extensions.js"></script>
<script src="~/plugins/input-mask/jquery.inputmask.regex.extensions.js"></script>

<script>
    $(document).ready(function () {

        $("input:radio[name='AligmentId']").on("change", function () {
            var descr = $(this).attr("data_descr");
            $(".aligment_description").html(descr);
        });

        //Datemask2
        $('#Growth').inputmask("Regex", {
            regex: "^[0-9]{3}"
        });

        $('#Weight').inputmask('Regex', {
            regex: "^[0-9]{3}"
        });

        $('#NickName').inputmask('Regex', {
            regex: "^[0-9aA-zZ]{20}"
        });

        var navListItems = $('div.setup-panel-3 div a'),
            allWells = $('.setup-content-3'),
            allNextBtn = $('.nextBtn-3'),
            allPrevBtn = $('.prevBtn-3');

        allWells.hide();

        navListItems.click(function (e) {
            e.preventDefault();
            var $target = $($(this).attr('href')),
                $item = $(this);

            if (!$item.hasClass('disabled')) {
                navListItems.removeClass('btn-info').addClass('btn-pink');
                $item.addClass('btn-info');
                allWells.hide();
                $target.show();
                $target.find('input:eq(0)').focus();
            }
        });

        allPrevBtn.click(function () {
            var curStep = $(this).closest(".setup-content-3"),
                curStepBtn = curStep.attr("id"),
                prevStepSteps = $('div.setup-panel-3 div a[href="#' + curStepBtn + '"]').parent().prev().children("a");

            prevStepSteps.removeAttr('disabled').trigger('click');
        });

        allNextBtn.click(function () {
            var curStep = $(this).closest(".setup-content-3"),
                curStepBtn = curStep.attr("id"),
                nextStepSteps = $('div.setup-panel-3 div a[href="#' + curStepBtn + '"]').parent().next().children("a"),
                curInputs = curStep.find("input[type='text'],input[type='url']"),
                isValid = true;

            $(".form-group").removeClass("has-error");
            for (var i = 0; i < curInputs.length; i++) {
                if (!curInputs[i].validity.valid) {
                    isValid = false;
                    $(curInputs[i]).closest(".form-group").addClass("has-error");
                }
            }

            if (isValid)
                nextStepSteps.removeAttr('disabled').trigger('click');
        });

        $('div.setup-panel-3 div a.btn-info').trigger('click');
    });
</script>